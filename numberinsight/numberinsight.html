<script type="text/javascript">
    RED.nodes.registerType('numberinsight',{
        category: 'Vonage APIs',
        color: '#FFA68C',
        defaults: {
          creds: {value:"", type:"vonagebasic"},
          ni_type: {},
          number: {},
          url: {value: "",}
        },
        inputs:1,
        outputs:1,
        icon: "vonage-white.svg",
        label: "Number Insight",
        paletteLabel: "Number Insight"
    });
</script>
<script type="text/x-red" data-template-name="numberinsight">
  <div class="form-row">
      <label for="node-config-input-privatekey"></i>Vonage Credentials</label>
      <input type="text" id="node-input-creds" >
  </div>
  
  <div class="form-row">
      <label for="node-input-ni_type"><i class="fa fa-tasks"></i>Type</label>
      <select type="text" id="node-input-ni_type" style="width:70%;" onchange="toggleURL(this.value)">
      <option value="basic">Number Insight Basic</option>
      <option value="standard">Number Insight Standard</option>
      <option value="advancedSync">Number Insight Advanced</option>
      <option value="advancedAsync">Number Insight Async</option>
       </select>
  </div>
  
  <div class="form-row">
      <label for="node-input-number"><i class="icon-tag"></i>Number {}</label>
      <input type="text" id="node-input-number" placeholder="number">
  </div>
  
  <div id="callbackurl" class="form-row" style="display: none;">
      <label for="node-input-url"><i class="icon-tag"></i>Callback {}</label>
      <input type="text" id="node-input-url" placeholder="url">
  </div>
  
</script>
<script>
    function toggleURL(ni_type){
      if (ni_type == 'advancedAsync'){
        document.getElementById("callbackurl").style.display = "block";    
      }
      else {
        document.getElementById("callbackurl").style.display = "none";
      }    
    }
</script>
    
    
<script type="text/x-red" data-help-name="numberinsight">
<p>Queries the Vonage Number Insight API</p>

<h3>Inputs</h3>

 <h3>Outputs</h3>
 <dl class="message-properties">
     <dt>ncco<span class="property-type">object</span></dt>
     <dd> <code>msg.payload</code> will contain the response from the Vonage API</dd>
 </dl>

<h3>Details</h3>
Vonage&apos;s Number Insight API delivers real-time information about the validity, reachability and roaming status of a phone number and tells you how to format the number correctly in your application.

We have merged al 4 of the Number Insight methods into a single node allowing you to select the level you want to use.

The Callback URL is only required for the Async type.
<h3>References</h3>
    <ul>
        <li><a href="https://developer.vonage.com/number-insight/overview">Vonage Documentation</a></li>
    </ul>
</script>

